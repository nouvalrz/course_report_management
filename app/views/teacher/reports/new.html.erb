<h2>Create Report</h2>
<div class="row mt-3">
  <div class="col-12 col-lg-3">
    <div class="row">
      <div class="col-12">
        <div class="card card-lightblue">
          <div class="card-header">
            <h4 class="card-title">Student Information</h4>
          </div>
          <div class="card-body">
            <%= form_with model: @student, url: '#' do |f| %>
                <div class="form-group">
                  <%= f.label :full_name, "Full Name" %>
                  <%= f.text_field :full_name, class: "form-control", placeholder: "Class Name", disabled: true %>
                </div>
                <div class="form-group">
                  <%= f.label :student_number, "Student Number" %>
                  <%= f.text_field :student_number, class: "form-control", placeholder: "Class Name", disabled: true %>
                </div>
                <div class="form-group">
                  <%= f.label :class_name, "Class Name" %>
                  <%= f.text_field :class_name, class: "form-control", placeholder: "Class Name", disabled: true, value: @course_enrollment.master_class.name %>
                </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <div class="card card-lightblue">
          <div class="card-header">
            <h4 class="card-title">Course Information</h4>
          </div>
          <div class="card-body">
            <%= form_with model:  @course_enrollment, url: '#' do |f| %>
              <div class="form-group">
                <%= f.label :course_title, "Course Title" %>
                <%= f.text_field :course_title, class: "form-control", placeholder: "Class Name", disabled: true, value: @course_enrollment.course.title %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-12 col-lg-9">
    <div class="card card-lightblue">
      <div class="card-header">
        <h3 class="card-title">Report Form</h3>
      </div>
      <div class="card-body">
        <%= form_with model: @report, url: teacher_student_course_enrollment_reports_path, method: 'post' do |f| %>
          <!-- Classroom fields -->

          <!--        <h3>Course Enrollments</h3>-->
          <div id="report_details">
            <%= f.fields_for :report_details do |report_detail_fields| %>
              <%= render 'report_detail_fields', f: report_detail_fields %>
            <% end %>
          </div>

          <%= link_to_add_fields "Add Report Detail", f, :report_details %>
          <div class="row mt-4">
            <div class="col-12">
              <%= f.submit "Save", class: "btn btn-primary w-100" %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<script>
    $(document).ready(function (){
        $(document).off('click', '.add_fields');
        $(document).on('click', '.add_fields', function(event) {
            var time = new Date().getTime();
            var regexp = new RegExp($(this).data('id'), 'g');
            var newFields = $(this).data('fields').replace(regexp, time);

            // Tambahkan form baru
            $(this).before(newFields);


            // Temukan form baru dan tambahkan opsi default
            var newSelect = $('.nested-fields:last-child .course-select');
            newSelect.prepend('<option value="" selected="selected" disabled="disabled">Select Course</option>');
            $('.select-criterium').select2({
                theme: 'bootstrap4',
            });

            event.preventDefault();
        });
    })



    $(document).on('click', '.remove_fields', function(event) {
        $(this).prev('input[type=hidden]').val('1');
        $(this).closest('.nested-fields').hide();
        event.preventDefault();
    });


    $(document).ready(function() {
        $('.select-criterium').select2({
            theme: 'bootstrap4',
        });
    });
</script>